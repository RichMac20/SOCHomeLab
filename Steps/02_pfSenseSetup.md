# pfSense Setup <img width="100" height="100" alt="download" src="https://github.com/user-attachments/assets/9d495425-6756-4d5b-89c0-eff7074dda82" />

### In Virtualbox Manager
- Set Network Adapters:
  - Adapter 1: NAT for WAN
  - Adapter 2: Internal Network for Windows Gateway/LAN 
  - Adapter 3: ‘External’ Attacker Network for Kali Linux Gateway/LAN 
  - Adapter 4: Network for Management of SecurityOnion/Splunk 
  - Adapter 5: Network for SPAN Port (Virtualbox GUI doesn’t support for NIC 5-8 configuration, must be through command line)
    - Enter the following as commands in CMD:
      - cd "C:\Program Files\Oracle\VirtualBox"
      - VBoxManage list vms
        - Select name for pfSense, mine is “PfSense”
      - VBoxManage modifyvm "PfSense" --nic5 intnet
        - Adds internal network type for nic5
      - VBoxManage modifyvm "PfSense" --intnet5 “Span-Network”
        - Sets Internal Network name
      - VBoxManage modifyvm "PfSense" --nicpromisc5 allow-all
        - Allows for Promiscuous mode 
          - Allows all traffic on segment not just traffic directed to pfSense
- Boot pfSense
- Following Install Procedure:
  - Install pfSense
  - Auto (UFS)
  - Entire Disk
  - MBR
  - Reboot
- Setup em1 IPV4 Gateway Address and DHCP Pool for Windows/Victim Network:
  - Set Interface(s) IP Address
  - Select LAN Interface
    - Gateway Address/Netmask: 192.168.50.1/24
  - Decline WAN IPV4 upstream gateway address 
    - Already using Virtualbox’s NAT as WAN IPV4 upstream gateway address 
  - Decline IPV6 setup (Not needed, 4 hosts total)
  - Setup DHCP Server Pool Range
    - 192.168.50.10 - 192.168.50.100
  - Allow HTTP as webConfigurator Protocol 
    - Allows for HTTP web Configuration of pfSense for various Services
- Setup Other Interfaces:
  - Assign Interfaces
  - Decline VLANS
  - Enter WAN: 'em0'
  - Enter 'em1'
  - Enter 'em2'
  - Enter 'em3'
  - Enter 'em4'
  - 'Y'
- Setup em2 IPV4 Gateway Address and DHCP Pool for Kali Linux/Attacker Network:
  - Set Interface(s) IP Address
  - Select LAN Interface
    - Gateway Address/Netmask: 172.16.0.1/24
  - Decline WAN IPV4 upstream gateway address 
    - Already using Virtualbox’s NAT as WAN IPV4 upstream gateway address 
  - Decline IPV6 setup (Not needed, 4 hosts total)
  - Setup DHCP Server Pool Range
    - 172.16.0.10 - 172.16.0.100
- Setup em3 IPV4 Gateway Address and DHCP Pool for Management Network: 
  - Set Interface(s) IP Address
  - Select LAN Interface
    - Gateway Address/Netmask: 192.168.100.1/24
  - Decline DHCP Setup
    - Will utilize static mapping 
- Setup em4 IPV4 Gateway Address and DHCP Pool for SpanPort (Mirror LAN1):
  - Set Interface(s) IP Address
  - Don’t enter an IP address (Just press 'Enter' for every prompt)
    - Will bridge the network to LAN1 later during Web Configuration 
